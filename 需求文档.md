## 修改代码结构

目前的代码主要集中在main.dart,简直是灾难
在真实的 Flutter 开发中，main.dart 应该通常非常短，它只负责程序的入口和全局初始化。

标把项目代码组织重构，重构后遵循“功能分层”或“特性分层”的原则。
**重构过程要检查原先代码有什么代码或者结构是多余没有用的，要删去多余的东西，确保重构后的代码简洁优雅。**

比如下面这个可供参考：
lib/
├── main.dart             # 程序入口 (越简单越好)
├── app.dart              # 根组件 (MaterialApp 配置)
├── core/                 # 核心通用功能 (工具类、常量)
│   ├── constants/        # 颜色、字体、API 地址
│   └── utils/            # 辅助函数 (日期格式化等)
├── models/               # 数据模型 (类似于 Python 的 dataclass)
│   └── user_model.dart
├── services/             # 数据服务层 (网络请求、数据库操作)
│   └── auth_service.dart
├── widgets/              # 全局通用的 UI 组件 (自定义按钮、输入框)
│   └── my_button.dart
└── pages/ (或 screens/)   # 具体的页面 (Scaffold 级别的)
    ├── home/             # 首页模块
    │   ├── home_page.dart
    │   └── home_controller.dart (如果用了状态管理)
    └── login/            # 登录页模块
        └── login_page.dart

main.dart (入口)
它应该只做一件事：启动 App。 代码示例：

Dart

void main() async {
  // 1. 确保 Flutter 绑定初始化 (如果有异步操作)
  WidgetsFlutterBinding.ensureInitialized();
  
  // 2. 初始化服务 (比如本地存储、Firebase)
  await StorageService.init();

  // 3. 运行 App
  runApp(const MyApp());
}
B. models/ (数据模型)
这里存放的是纯 Dart 类，用于描述数据结构。 Python 类比： 类似于 Python 的 dataclasses 或 Django 的 models.py (但不含数据库逻辑，只含数据结构)。 代码示例 (user.dart)：

Dart

class User {
  final String name;
  final int age;
  User({required this.name, required this.age});
}
C. pages/ 或 screens/ (页面)
这里放完整的页面代码，通常是一个 Scaffold。 规则： 一个文件夹代表一个页面。如果页面很复杂，可以在这个文件夹下再拆分出只属于这个页面的小组件 (widgets)。

D. widgets/ (通用组件)
这里放那些**“傻瓜组件”**。 什么叫傻瓜组件？ 比如一个“红色圆角按钮”。它不知道业务逻辑（不知道点了要干嘛），它只负责长得好看。你给它文字，给它点击回调，它就显示。 Python 类比： 类似于前端模板中的 reusable components。

E. services/ (逻辑与数据层)
这里写**“不含 UI 的逻辑”**。

